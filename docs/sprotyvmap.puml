@startuml sprotyvmap
skinparam linetype ortho
package sprotyvmap
{
    package Shared
    {
        package Abstractions
        {
            hide fields
            interface IDataProvider
            {
                GetEquipmentCentreAsync()
                GetAllDistrictsAsync()
            }
            interface IMapPointProvider
            {
                GetPointAsync()
            }
        }
        package Primitives
        {
            hide methods
            struct District
            {
                +Id
                +Name
                +EquipmentCentres
            }
            struct EquipmentCentre
            {
                +Title
                +Information
                +Location
                +Point
            }
            struct MapPoint
            {
                +Latitude
                +Longitude
            }
        }
        District *- EquipmentCentre
        EquipmentCentre o- MapPoint

    }
    package EquipmentCentreService
    {
        package Controllers
        {
            class DistrictsController
            {
                -dataProvider
                -mapPointProvider
                +Get() | api/Districts
                +GetCentre() | api/Districts/{}/centre/{}
            }
            IDataProvider --o DistrictsController
            IMapPointProvider --o DistrictsController
        }
        package Providers
        {
            class VisicomMapPointProvider
            {
                -httpClient
                +GetPointAsync()
            }
            IMapPointProvider <|.. VisicomMapPointProvider
        }

    }
    package SprotyvInUaScraper
    {
        class WebScraper
        {
            -httpClient
            +{static}Create()
            +LoadDataAsync()
            +GetAllDistricts()
            +GetEquipmentCentres()
            +GetEquipmentCentre()
        }
        WebScraper ..|> IDataProvider
        class XPathBuilder
        {
            {static} DistrictNameXPath
            {static} EquipmentCentreName
            {static} EquipmentCentreInfo
            {static} EquipmentCentreLocation
            {static} EquipmentCentreData
            {static} DistrictXPath
            {static} AllDistrictsXPath
        }
        hide XPathBuilder methods
        XPathBuilder <- WebScraper
    }
    package WebApp
    {

        package Services
        {
            interface IEquipmentCentreProvider
            {
                GetDistrictsAsync()
            }
            class ApiEquipmentCentreProvider implements IEquipmentCentreProvider
            {
                -httpClient
                +GetDistrictsAsync()
            }
        }
        package Pages
        {
            class About
            {
            }
            hide About members
            class Main
            {
                -Map
            }
            hide Main methods
        }
        Main -left-> IEquipmentCentreProvider
    }
}
set separator none
package Visicom.DataApi.Geocoder
{
    package Visicom.DataApi.Abstractions
    {
        interface IGeocoder
        {
            SetOptions()
            GetCoordinates()
            GetCoordinatesAsync()
        }
        interface IRequestOptions
        {
            ApiKey
            Language
            Categories
            ExcludeCategories
            Text
            WordText
            Near
            NearRadius
            Order
            IntersectionArea
            ContainsArea
            Zoom
            Limit
            CountryCode
            CountryCodePriority
        }
    }
    package Data
    {
        hide members
        struct Response
        struct Properties
        struct GeoCentroid
        struct Coordinates
        Response o-- GeoCentroid
        Response o-- Properties
        GeoCentroid o-- Coordinates
    }
    package Enums
    {
        hide methods
        enum Categories
        {
            ItService,
            Cemetery,
            Prisons...
        }
        enum Languages
        {
            Ukrainian,
            English,
            Russian
        }
        enum Order
        {
            Relevance,
            Distance
        }
    }
    class BasicGeocoder implements IGeocoder
    {
        -requestOptions
        -httpClient
        +SetOptions()
        +GetCoordinates()
        +GetCoordinatesAsync()
    }
    class RequestOptions implements IRequestOptions
    {
        ... see IRequestOptions ...
    }
    RequestOptions o-- Enums
    BasicGeocoder --> Data
    BasicGeocoder o-- IRequestOptions
    VisicomMapPointProvider --|> BasicGeocoder
}

@enduml